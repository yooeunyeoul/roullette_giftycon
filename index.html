<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- âœ… OG íƒœê·¸ëŠ” ì—¬ê¸°! (ìƒë‹¨ì—) -->
  <meta property="og:title" content="í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë£°ë › - 100% ë‹¹ì²¨!">
  <meta property="og:description" content="ì„ ì°©ìˆœ 100ëª… í•œì •! ë‹¹ì²¨ ìƒí’ˆ ìºì‹œë¡œ ì¦‰ì‹œ ì§€ê¸‰">
  <meta property="og:image" content="https://yooeunyeoul.github.io/roullette_giftycon/images/thumbnail2.png">
  <meta property="og:url" content="https://yooeunyeoul.github.io/roullette_giftycon/">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="ê³¨ë“œìŠ¤í…">
  <meta name="twitter:card" content="summary_large_image">
  
  <title>ğŸ„ ê³¨ë“œìŠ¤í… ë¯¸ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë£°ë ›</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Jua&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Jua', 'Noto Sans KR', sans-serif;
      background: linear-gradient(180deg, #1e3c72 0%, #2a5298 50%, #4a7bb7 100%);
      min-height: 100vh;
      color: #fff;
      overflow-x: hidden;
      position: relative;
    }
    
    /* ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼ */
    .snowflakes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    
    .snowflake {
      position: absolute;
      top: -20px;
      color: #fff;
      font-size: 20px;
      opacity: 0.8;
      animation: fall linear infinite;
    }
    
    @keyframes fall {
      0% { transform: translateY(-20px) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(360deg); }
    }
    
    /* ì½˜í˜í‹° íš¨ê³¼ */
    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 200;
      overflow: hidden;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      opacity: 0;
    }
    
    .confetti.active {
      animation: confetti-fall 3s ease-out forwards;
    }
    
    @keyframes confetti-fall {
      0% {
        opacity: 1;
        transform: translateY(0) rotate(0deg) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(100vh) rotate(720deg) scale(0.5);
      }
    }
    
    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 10;
    }
    
    .header {
      text-align: center;
      padding: 20px 0;
    }
    
    .title {
      font-size: 32px;
      font-weight: 900;
      color: #fff;
      text-shadow: 3px 3px 0 #c41e3a, 5px 5px 0 rgba(0,0,0,0.2);
      animation: title-bounce 2s ease-in-out infinite;
    }
    
    @keyframes title-bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }
    
    .subtitle {
      font-size: 18px;
      color: #ffd93d;
      margin-top: 10px;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
    }
    
    .subtitle .highlight {
      background: linear-gradient(135deg, #ff6b6b, #ffd93d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 22px;
    }
    
    .roulette-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 25px 0;
    }
    
    .wheel-wrapper {
      position: relative;
    }
    
    .pointer {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 45px;
      z-index: 10;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
      animation: pointer-bounce 0.5s ease-in-out infinite;
    }
    
    @keyframes pointer-bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(8px); }
    }
    
    #wheel {
      width: 320px;
      height: 320px;
      border-radius: 50%;
      box-shadow: 
        0 0 0 12px #ff6b6b,
        0 0 0 18px #ffd93d,
        0 0 0 24px #6bcf63,
        0 0 0 30px #4dabf7,
        0 0 60px rgba(255,107,107,0.5);
      animation: wheel-glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes wheel-glow {
      0% { box-shadow: 0 0 0 12px #ff6b6b, 0 0 0 18px #ffd93d, 0 0 0 24px #6bcf63, 0 0 0 30px #4dabf7, 0 0 40px rgba(255,107,107,0.4); }
      100% { box-shadow: 0 0 0 12px #ff6b6b, 0 0 0 18px #ffd93d, 0 0 0 24px #6bcf63, 0 0 0 30px #4dabf7, 0 0 80px rgba(255,217,61,0.6); }
    }
    
    .spin-btn {
      margin-top: 35px;
      padding: 20px 60px;
      font-size: 24px;
      font-weight: 700;
      font-family: 'Jua', sans-serif;
      color: #fff;
      background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
      border: 4px solid #fff;
      border-radius: 60px;
      cursor: pointer;
      box-shadow: 
        0 6px 0 #c0392b,
        0 10px 20px rgba(0,0,0,0.3);
      transition: all 0.1s;
      animation: btn-wiggle 3s ease-in-out infinite;
    }
    
    @keyframes btn-wiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-2deg); }
      75% { transform: rotate(2deg); }
    }
    
    .spin-btn:hover {
      transform: translateY(-3px);
      box-shadow: 
        0 9px 0 #c0392b,
        0 15px 30px rgba(0,0,0,0.4);
    }
    
    .spin-btn:active {
      transform: translateY(3px);
      box-shadow: 
        0 3px 0 #c0392b,
        0 5px 10px rgba(0,0,0,0.3);
    }
    
    .spin-btn:disabled {
      background: #888;
      border-color: #666;
      box-shadow: 0 4px 0 #555;
      animation: none;
      cursor: not-allowed;
    }
    
    /* ë§í’ì„  ìŠ¤íƒ€ì¼ ìœ ì˜ì‚¬í•­ */
    .notice-section {
      background: #fff;
      color: #333;
      border-radius: 25px;
      padding: 25px;
      margin-top: 25px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .notice-section::before {
      content: '';
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 15px solid #fff;
    }
    
    .notice-section h3 {
      font-size: 18px;
      color: #e74c3c;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .notice-section h3 .icon {
      font-size: 24px;
      animation: shake 0.5s ease-in-out infinite;
    }
    
    @keyframes shake {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
    }
    
    .notice-list {
      list-style: none;
      font-size: 14px;
      line-height: 2.2;
    }
    
    .notice-list li {
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }
    
    .notice-list li::before {
      content: 'âœ“';
      color: #27ae60;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .notice-list .highlight-box {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      padding: 3px 10px;
      border-radius: 8px;
      font-size: 13px;
    }
    
    .notice-list .warning {
      color: #e74c3c;
      font-weight: bold;
    }
    
    .notice-list .warning::before {
      content: 'âš¡';
    }
    
    .notice-period {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      padding: 12px 20px;
      border-radius: 15px;
      margin-top: 15px;
      text-align: center;
      font-size: 15px;
    }
    
    .notice-period .date {
      font-size: 18px;
      font-weight: bold;
    }
    
    .early-end {
      background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
      color: #fff;
      padding: 12px 20px;
      border-radius: 15px;
      margin-top: 10px;
      text-align: center;
      font-size: 14px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.9; transform: scale(1.02); }
    }
    
    /* ì¥ì‹ */
    .deco {
      position: fixed;
      font-size: 40px;
      opacity: 0.8;
      animation: float 3s ease-in-out infinite;
    }
    .deco-1 { top: 8%; left: 3%; animation-delay: 0s; }
    .deco-2 { top: 12%; right: 5%; animation-delay: 0.5s; }
    .deco-3 { bottom: 25%; left: 5%; animation-delay: 1s; }
    .deco-4 { bottom: 20%; right: 3%; animation-delay: 1.5s; }
    .deco-5 { top: 40%; left: 2%; animation-delay: 2s; font-size: 30px; }
    .deco-6 { top: 50%; right: 2%; animation-delay: 2.5s; font-size: 30px; }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(10deg); }
    }
    
    /* ëª¨ë‹¬ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
      z-index: 100;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal.show { display: flex; }
    
    .modal-box {
      background: linear-gradient(180deg, #fff, #f8f9fa);
      border-radius: 30px;
      padding: 35px 25px;
      text-align: center;
      max-width: 340px;
      width: 100%;
      animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    @keyframes popIn {
      0% { transform: scale(0.3) rotate(-10deg); opacity: 0; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    
    .modal-emoji { 
      font-size: 60px; 
      animation: celebrate 0.5s ease-in-out infinite alternate;
    }
    
    @keyframes celebrate {
      0% { transform: scale(1) rotate(-5deg); }
      100% { transform: scale(1.1) rotate(5deg); }
    }
    
    .modal-title {
      font-size: 28px;
      color: #e74c3c;
      margin: 15px 0;
      font-family: 'Jua', sans-serif;
    }
    
    .modal-prize {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 20px;
      padding: 25px;
      margin: 15px 0;
    }
    
    .modal-prize img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      border-radius: 15px;
      background: #fff;
      padding: 10px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      animation: prize-bounce 0.5s ease-in-out infinite alternate;
    }
    
    @keyframes prize-bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-5px); }
    }
    
    .modal-prize-text {
      font-size: 24px;
      font-weight: 900;
      color: #fff;
      margin-top: 12px;
      font-family: 'Jua', sans-serif;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
    }
    
    .modal-cash-info {
      background: #fff3cd;
      border: 2px solid #ffc107;
      border-radius: 15px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .modal-cash-info p {
      font-size: 15px;
      color: #856404;
      line-height: 1.6;
      margin: 0;
    }
    
    .modal-cash-info .cash-amount {
      font-size: 20px;
      font-weight: bold;
      color: #d63384;
    }
    
    .modal-login-info {
      background: #e8f4fd;
      border: 2px solid #4dabf7;
      border-radius: 15px;
      padding: 15px;
      margin: 15px 0;
    }
    
    .modal-login-info p {
      font-size: 14px;
      color: #1864ab;
      line-height: 1.6;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .modal-login-info .kakao-icon {
      font-size: 22px;
    }
    
    .modal-btn {
      display: block;
      width: 100%;
      padding: 18px;
      font-size: 18px;
      font-weight: 700;
      font-family: 'Jua', sans-serif;
      color: #fff;
      background: linear-gradient(135deg, #27ae60, #2ecc71);
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 
        0 5px 0 #1e8449,
        0 10px 20px rgba(39,174,96,0.3);
      transition: all 0.1s;
      margin-top: 10px;
    }
    
    .modal-btn:hover {
      transform: translateY(-2px);
    }
    
    .modal-btn:active {
      transform: translateY(3px);
      box-shadow: 0 2px 0 #1e8449;
    }
    
    .modal-timer {
      margin-top: 15px;
      font-size: 13px;
      color: #e74c3c;
      font-weight: bold;
    }
    
    .modal-note {
      margin-top: 8px;
      font-size: 11px;
      color: #999;
    }
  </style>
  
</head>
<body>
  <!-- ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼ -->
  <div class="snowflakes" id="snowflakes"></div>
  
  <!-- ì½˜í˜í‹° ì»¨í…Œì´ë„ˆ -->
  <div class="confetti-container" id="confetti-container"></div>
  
  <!-- ì¥ì‹ -->
  <div class="deco deco-1">ğŸ„</div>
  <div class="deco deco-2">ğŸ…</div>
  <div class="deco deco-3">ğŸ</div>
  <div class="deco deco-4">â›„</div>
  <div class="deco deco-5">ğŸ¦Œ</div>
  <div class="deco deco-6">ğŸ””</div>
  
  <div class="container">
    <header class="header">
      <h1 class="title">ğŸ„ ë¯¸ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë£°ë › ğŸ…</h1>
      <p class="subtitle"><span class="highlight">100% ë‹¹ì²¨!</span> ê½ ì—†ì–´ìš”~</p>
    </header>
    
    <section class="roulette-section">
      <div class="wheel-wrapper">
        <div class="pointer">ğŸ‘‡</div>
        <canvas id="wheel"></canvas>
      </div>
      <button id="spinBtn" class="spin-btn">ğŸ° ëŒë ¤ëŒë ¤~!</button>
    </section>
    
    <section class="notice-section">
      <h3><span class="icon">ğŸ“¢</span> ì ê¹! ê¼­ ì½ì–´ì£¼ì„¸ìš”</h3>
      <ul class="notice-list">
        <li><strong>ì‹ ê·œ íšŒì› ì „ìš©</strong> ì´ë²¤íŠ¸ì˜ˆìš”!</li>
        <li>ë‹¹ì²¨ ìƒí’ˆì€ <span class="highlight-box">ğŸ’° ìºì‹œë¡œ ì¦‰ì‹œ ì§€ê¸‰!</span></li>
        <li>ì§€ê¸‰ëœ ìºì‹œë¡œ í•´ë‹¹ ìƒí’ˆì„ êµ¬ë§¤í•  ìˆ˜ ìˆì–´ìš”</li>
        <li>ì•± ì„¤ì¹˜ í›„ <strong>ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸</strong> í•„ìˆ˜!</li>
        <li class="warning">ì„ ì°©ìˆœ 100ëª… í•œì •!</li>
      </ul>
      <div class="notice-period">
        ğŸ“… ì´ë²¤íŠ¸ ê¸°ê°„: <span class="date">11.25 ~ 12.01</span>
      </div>
      <div class="early-end">
        ğŸ ì„ ì°©ìˆœ 100ëª…! ì¡°ê¸° ë§ˆê°ë  ìˆ˜ ìˆì–´ìš”!
      </div>
    </section>
  </div>
  
  <!-- ê²°ê³¼ ëª¨ë‹¬ -->
  <div id="modal" class="modal">
    <div class="modal-box">
      <div class="modal-emoji">ğŸ‰</div>
      <h2 class="modal-title">ì™€ì•„~ ì¶•í•˜í•´ìš”!</h2>
      
      <div class="modal-prize">
        <img id="prizeImg" src="" alt="">
        <p id="prizeText" class="modal-prize-text"></p>
      </div>
      
      <div class="modal-cash-info">
  <p><span id="prizeName">ììœ ì‹œê°„</span>ì— í•´ë‹¹í•˜ëŠ” ìºì‹œë¥¼<br>íšŒì›ê°€ì… ì‹œ ì§€ê¸‰í•´ë“œë¦½ë‹ˆë‹¤! ğŸ’°</p>
      </div>
      
      <div class="modal-login-info">
        <p><span class="kakao-icon">ğŸ’¬</span> ê³¨ë“œìŠ¤í… ì•±ì—ì„œ<br><strong>ì¹´ì¹´ì˜¤í†¡ ë¡œê·¸ì¸</strong>ì„ í•˜ì…”ì•¼<br>ìƒí’ˆì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”!</p>
      </div>
      
      <button id="downloadBtn" class="modal-btn">ğŸ ì§€ê¸ˆ ë°”ë¡œ ë‹¹ì²¨ ì„ ë¬¼ ë°›ìœ¼ëŸ¬ê°€ê¸°</button>
      
      <p class="modal-timer">â° 24ì‹œê°„ ì•ˆì— ì„¤ì¹˜í•´ì•¼ ìœ íš¨í•´ìš”!</p>
      <p class="modal-note">â€» í˜„ì¬ Androidë§Œ ì§€ì›ë©ë‹ˆë‹¤</p>
    </div>
  </div>

  <script>
    // ============================================
    // ğŸ”§ ì„¤ì •
    // ============================================
    const CONFIG = {
      ONELINK_BASE: 'https://goldstep.onelink.me/3a1d/ybq9vmeu',
      PLAYSTORE_URL: 'https://play.google.com/store/apps/details?id=com.goldmanbo.circle&hl=ko',
      CAMPAIGN: 'christmas_roulette_2025',
      MEDIA_SOURCE: 'web_roulette'
    };

    // ============================================
    // ğŸ ìƒí’ˆ ë°ì´í„° (6ê°œ)
    // ============================================
    const PRIZES = [
      { id: 'shinramen',   text: 'ì‹ ë¼ë©´ ì†Œì»µ',     image: 'images/shinramen.png',   price: 1170, prob: 18 },
      { id: 'jayusigan',   text: 'ììœ ì‹œê°„',        image: 'images/jayusigan.png',   price: 1120, prob: 18 },
      { id: 'kimchi',      text: 'ê¹€ì¹˜ ì‚¬ë°œë©´',     image: 'images/kimchi.png',      price: 1030, prob: 18 },
      { id: 'yukgaejang',  text: 'ìœ¡ê°œì¥ ì‚¬ë°œë©´',   image: 'images/yukgaejang.png',  price: 1030, prob: 18 },
      { id: 'gatorade',    text: 'ê²Œí† ë ˆì´ ë ˆëª¬',   image: 'images/gatorade.png',    price: 1120, prob: 14 },
      { id: 'chocosongyi', text: 'ì´ˆì½”ì†¡ì´',        image: 'images/chocosongyi.png', price: 1120, prob: 14 }
    ];

    // ë¬´ì§€ê°œ íŒŒìŠ¤í…” ìƒ‰ìƒ
    const WHEEL_COLORS = ['#FFE5E5', '#FFF3E5', '#FFFDE5', '#E5FFE5', '#E5F3FF', '#F3E5FF'];

    // ============================================
    // â„ï¸ ëˆˆ ë‚´ë¦¬ëŠ” íš¨ê³¼
    // ============================================
    function createSnowflakes() {
      const container = document.getElementById('snowflakes');
      const snowflakeChars = ['â„', 'â…', 'â†', 'âœ¦', 'â€¢', 'â­'];
      
      for (let i = 0; i < 50; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.fontSize = (Math.random() * 15 + 10) + 'px';
        snowflake.style.opacity = Math.random() * 0.6 + 0.2;
        snowflake.style.animationDuration = (Math.random() * 5 + 5) + 's';
        snowflake.style.animationDelay = (Math.random() * 10) + 's';
        container.appendChild(snowflake);
      }
    }
    createSnowflakes();

    // ============================================
    // ğŸŠ ì½˜í˜í‹° íš¨ê³¼
    // ============================================
    function createConfetti() {
      const container = document.getElementById('confetti-container');
      container.innerHTML = '';
      
      const colors = ['#ff6b6b', '#ffd93d', '#6bcf63', '#4dabf7', '#cc5de8', '#ff922b', '#fff'];
      const shapes = ['â– ', 'â—', 'â–²', 'â˜…', 'â™¦', 'â™¥', 'ğŸ‰', 'ğŸŠ'];
      
      for (let i = 0; i < 120; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-20px';
        confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.fontSize = (Math.random() * 20 + 10) + 'px';
        confetti.style.animationDelay = (Math.random() * 0.5) + 's';
        confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
        container.appendChild(confetti);
        
        setTimeout(() => {
          confetti.classList.add('active');
        }, 50);
      }
      
      setTimeout(() => {
        container.innerHTML = '';
      }, 4000);
    }

    // ============================================
    // ğŸ¨ ê³ í•´ìƒë„ ìº”ë²„ìŠ¤ ì„¤ì •
    // ============================================
    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    
    const displaySize = 320;
    const scale = 2;
    canvas.width = displaySize * scale;
    canvas.height = displaySize * scale;
    canvas.style.width = displaySize + 'px';
    canvas.style.height = displaySize + 'px';
    ctx.scale(scale, scale);
    
    const centerX = displaySize / 2;
    const centerY = displaySize / 2;
    const radius = displaySize / 2 - 5;

    let currentAngle = 0;
    let imagesLoaded = 0;
    const prizeImages = [];

    // ì´ë¯¸ì§€ ë¯¸ë¦¬ ë¡œë“œ
    PRIZES.forEach((prize, i) => {
      const img = new Image();
      img.onload = () => {
        imagesLoaded++;
        if (imagesLoaded === PRIZES.length) drawWheel();
      };
      img.onerror = () => {
        imagesLoaded++;
        if (imagesLoaded === PRIZES.length) drawWheel();
      };
      img.src = prize.image;
      prizeImages[i] = img;
    });

    function drawWheel() {
      const sliceAngle = (2 * Math.PI) / PRIZES.length;
      
      PRIZES.forEach((prize, i) => {
        const startAngle = currentAngle + i * sliceAngle;
        const endAngle = startAngle + sliceAngle;
        
        // ì¡°ê° ê·¸ë¦¬ê¸° (íŒŒìŠ¤í…” ìƒ‰ìƒ)
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, startAngle, endAngle);
        ctx.closePath();
        ctx.fillStyle = WHEEL_COLORS[i];
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 3;
        ctx.stroke();
        
        // ì´ë¯¸ì§€ ê·¸ë¦¬ê¸° (ì •ë©´ìœ¼ë¡œ ë³´ì •!)
        ctx.save();
        ctx.translate(centerX, centerY);
        
        // ì¡°ê° ì¤‘ì•™ìœ¼ë¡œ ì´ë™
        const midAngle = startAngle + sliceAngle / 2;
        const imgDistance = radius - 50;
        const imgX = Math.cos(midAngle) * imgDistance;
        const imgY = Math.sin(midAngle) * imgDistance;
        
        ctx.translate(imgX, imgY);
        
        // â­ í•µì‹¬: ì´ë¯¸ì§€ë¥¼ ì •ë©´ìœ¼ë¡œ ìœ ì§€ (ì—­íšŒì „)
        ctx.rotate(-currentAngle);
        
        const imgSize = 85;
        
        if (prizeImages[i] && prizeImages[i].complete && prizeImages[i].naturalWidth > 0) {
          // ì´ë¯¸ì§€ ë°°ê²½ (í°ìƒ‰ ì›)
          ctx.shadowColor = 'rgba(0,0,0,0.15)';
          ctx.shadowBlur = 10;
          ctx.shadowOffsetY = 4;
          
          ctx.beginPath();
          ctx.arc(0, 0, imgSize/2 + 6, 0, 2 * Math.PI);
          ctx.fillStyle = '#fff';
          ctx.fill();
          
          ctx.shadowColor = 'transparent';
          
          // í…Œë‘ë¦¬
          ctx.strokeStyle = WHEEL_COLORS[i];
          ctx.lineWidth = 3;
          ctx.stroke();
          
          // ì´ë¯¸ì§€ (ì›í˜• í´ë¦¬í•‘)
          ctx.save();
          ctx.beginPath();
          ctx.arc(0, 0, imgSize/2, 0, 2 * Math.PI);
          ctx.clip();
          ctx.drawImage(prizeImages[i], -imgSize/2, -imgSize/2, imgSize, imgSize);
          ctx.restore();
        }
        
        ctx.restore();
      });
      
      // ì¤‘ì•™ ì› (ê·€ì—¬ìš´ ë²„ì „)
      ctx.shadowColor = 'rgba(0,0,0,0.2)';
      ctx.shadowBlur = 15;
      ctx.beginPath();
      ctx.arc(centerX, centerY, 40, 0, 2 * Math.PI);
      const gradient = ctx.createRadialGradient(centerX-10, centerY-10, 0, centerX, centerY, 40);
      gradient.addColorStop(0, '#ff8a8a');
      gradient.addColorStop(1, '#ff6b6b');
      ctx.fillStyle = gradient;
      ctx.fill();
      ctx.shadowColor = 'transparent';
      
      // ì¤‘ì•™ í…Œë‘ë¦¬
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 5;
      ctx.stroke();
      
      // ì¤‘ì•™ ì´ëª¨ì§€
      ctx.font = '28px sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('ğŸ', centerX, centerY);
    }

    setTimeout(drawWheel, 100);

    // ============================================
    // ğŸ² í™•ë¥  ê¸°ë°˜ ì„ íƒ
    // ============================================
    function selectPrize() {
      const total = PRIZES.reduce((sum, p) => sum + p.prob, 0);
      let rand = Math.random() * total;
      for (const prize of PRIZES) {
        rand -= prize.prob;
        if (rand <= 0) return prize;
      }
      return PRIZES[0];
    }

    // ============================================
    // ğŸ“± ë””ë°”ì´ìŠ¤ ê°ì§€
    // ============================================
    function isAndroid() {
      return /Android/i.test(navigator.userAgent);
    }
    
    function isIOS() {
      return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    // ============================================
    // ğŸ”— ì•±ìŠ¤í”Œë¼ì´ì–´ OneLink URL ìƒì„±
    // ============================================
    function generateOneLinkUrl(prize) {
      const params = new URLSearchParams({
        pid: CONFIG.MEDIA_SOURCE,
        c: CONFIG.CAMPAIGN,
        deep_link_value: 'christmas_event',
        deep_link_sub1: prize.id,
        deep_link_sub2: prize.text,
        deep_link_sub3: prize.price
      });
      
      return `${CONFIG.ONELINK_BASE}?${params.toString()}`;
    }

    // ============================================
    // ğŸ’° ê°€ê²© í¬ë§·íŒ…
    // ============================================
    function formatPrice(price) {
      return price.toLocaleString('ko-KR');
    }

    // ============================================
    // ğŸ¡ ë£°ë › íšŒì „
    // ============================================
    let isSpinning = false;
    const spinBtn = document.getElementById('spinBtn');

    spinBtn.addEventListener('click', () => {
      if (isSpinning) return;
      isSpinning = true;
      spinBtn.disabled = true;
      spinBtn.textContent = 'ë‘ê·¼ë‘ê·¼...ğŸ’“';

      const prize = selectPrize();
      const prizeIndex = PRIZES.indexOf(prize);
      const sliceAngle = 360 / PRIZES.length;
      
      const targetAngle = 360 - (prizeIndex * sliceAngle + sliceAngle / 2) - 90;
      const totalRotation = 360 * 7 + targetAngle;
      
      let start = null;
      const duration = 5500;
      const startAngleDeg = currentAngle * 180 / Math.PI;

      function animate(timestamp) {
        if (!start) start = timestamp;
        const progress = Math.min((timestamp - start) / duration, 1);
        
        const easeOut = 1 - Math.pow(1 - progress, 4);
        currentAngle = (startAngleDeg + totalRotation * easeOut) * Math.PI / 180;
        
        ctx.clearRect(0, 0, displaySize, displaySize);
        drawWheel();
        
        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          isSpinning = false;
          showModal(prize);
        }
      }
      
      requestAnimationFrame(animate);
    });

    // ============================================
    // ğŸŠ ê²°ê³¼ ëª¨ë‹¬
    // ============================================
    function showModal(prize) {
      createConfetti();
      
      document.getElementById('prizeImg').src = prize.image;
      document.getElementById('prizeText').textContent = prize.text + ' ë‹¹ì²¨! ğŸŠ';
      document.getElementById('prizeName').textContent = prize.text;
      document.getElementById('modal').classList.add('show');
      
      document.getElementById('downloadBtn').onclick = () => {
        if (isAndroid()) {
          const oneLinkUrl = generateOneLinkUrl(prize);
          console.log('OneLink URL:', oneLinkUrl);
          window.location.href = oneLinkUrl;
        } else if (isIOS()) {
          alert('iOS ë²„ì „ì€ ì¤€ë¹„ ì¤‘ì´ì—ìš”! ğŸ™\nì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”~');
        } else {
          window.location.href = CONFIG.PLAYSTORE_URL;
        }
      };
    }
  </script>
</body>
</html>
