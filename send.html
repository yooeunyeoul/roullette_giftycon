<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¨ë“œìŠ¤í… ì†¡ê¸ˆ ë„ìš°ë¯¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
            margin: 0;
        }
        h2 { margin-top: 0; color: #333; }
        
        /* ì…ë ¥ ì˜ì—­ */
        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 12px;
            box-sizing: border-box; /* íŒ¨ë”© í¬í•¨ */
            margin-bottom: 10px;
        }

        button#convertBtn {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 20px;
        }

        /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        #listContainer {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
            border: 1px solid #eee;
        }

        .card:active {
            background-color: #e0e0e0;
            transform: scale(0.98);
        }

        /* ì™„ë£Œ(ì†¡ê¸ˆí•¨) ìƒíƒœ ìŠ¤íƒ€ì¼ */
        .card.done {
            background-color: #d1e7dd; /* ì´ˆë¡ìƒ‰ ë°°ê²½ */
            opacity: 0.6;
            text-decoration: line-through;
            border-color: #badbcc;
        }
        .card.done::after {
            content: 'ì™„ë£Œ';
            color: green;
            font-weight: bold;
            font-size: 14px;
        }

        .info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .amount {
            font-size: 18px;
            font-weight: bold;
            color: #d63384;
        }
        
        .bank-info {
            font-size: 16px;
            color: #333;
            font-weight: 500;
        }

        .name {
            font-size: 14px;
            color: #666;
        }

        /* ì•Œë¦¼ í† ìŠ¤íŠ¸ */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            font-size: 17px;
            border-radius: 20px;
        }

        #toast.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @-webkit-keyframes fadein {
            from {bottom: 0; opacity: 0;} 
            to {bottom: 30px; opacity: 1;}
        }

        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }

        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;} 
            to {bottom: 0; opacity: 0;}
        }
    </style>
</head>
<body>

    <h2>ğŸ’¸ ì†¡ê¸ˆ ë¦¬ìŠ¤íŠ¸ ë³€í™˜ê¸°</h2>
    <textarea id="rawData" placeholder="ì—¬ê¸°ì— DB ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
    <button id="convertBtn" onclick="parseData()">ë³€í™˜í•˜ê¸°</button>

    <div id="listContainer"></div>

    <div id="toast">ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬ ì™„ë£Œ!</div>

    <script>
        function parseData() {
            const raw = document.getElementById('rawData').value.trim();
            if (!raw) return;

            const rows = raw.split('\n');
            const container = document.getElementById('listContainer');
            container.innerHTML = ''; // ì´ˆê¸°í™”

            rows.forEach(row => {
                // íƒ­(\t)ìœ¼ë¡œ ë°ì´í„° ë¶„ë¦¬ (ê³µë°±ì´ ì—¬ëŸ¬ê°œì¼ ê²½ìš°ë„ ëŒ€ë¹„)
                // DBë°ì´í„°ê°€ íƒ­ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
                const cols = row.split(/\t/); 

                // ë°ì´í„°ê°€ ë¹ˆ ì¤„ì´ë©´ íŒ¨ìŠ¤
                if (cols.length < 5) return;

                // ì¸ë±ìŠ¤ ë§¤í•‘ (ì œê³µí•´ì£¼ì‹  ë°ì´í„° ê¸°ì¤€)
                // 0: UUID, 1: UUID, 2: ê¸ˆì•¡, 3: í¬ì¸íŠ¸?, 4: ì€í–‰ëª…, 5: ê³„ì¢Œë²ˆí˜¸, 6: ì˜ˆê¸ˆì£¼
                const amount = cols[2];
                const bankName = cols[4];
                const accountNum = cols[5];
                const holderName = cols[6];

                // ì¹´ë“œ ìƒì„±
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = function() {
                    copyToClipboard(accountNum, card);
                };

                const infoDiv = document.createElement('div');
                infoDiv.className = 'info';

                // ê¸ˆì•¡ í‘œì‹œ (ì½¤ë§ˆ ì¶”ê°€)
                const fmtAmount = Number(amount).toLocaleString() + 'ì›';

                infoDiv.innerHTML = `
                    <span class="amount">${fmtAmount}</span>
                    <span class="bank-info">${bankName} ${accountNum}</span>
                    <span class="name">ì˜ˆê¸ˆì£¼: ${holderName}</span>
                `;

                card.appendChild(infoDiv);
                container.appendChild(card);
            });

            // ì…ë ¥ì°½ ìˆ¨ê¸°ê¸° (ê¹”ë”í•˜ê²Œ ë³´ë ¤ê³ )
            document.getElementById('rawData').style.display = 'none';
            document.getElementById('convertBtn').innerText = 'ë‹¤ì‹œ ì…ë ¥í•˜ê¸°';
            document.getElementById('convertBtn').onclick = function() {
                location.reload();
            };
        }

        function copyToClipboard(text, element) {
            // í´ë¦½ë³´ë“œ ë³µì‚¬
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            // ìŠ¤íƒ€ì¼ ë³€ê²½ (ì™„ë£Œ í‘œì‹œ)
            element.classList.add('done');

            // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
            showToast(`${text} ë³µì‚¬ë¨`);
        }

        function showToast(msg) {
            const x = document.getElementById("toast");
            x.innerText = msg;
            x.className = "show";
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
        }
    </script>
</body>
</html>
